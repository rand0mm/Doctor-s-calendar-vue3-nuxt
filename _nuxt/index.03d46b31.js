import{a as I,r as p,b as J,e as v,w as O,o as _,f as d,h as s,i as T,v as j,j as h,F as y,k as f,u,l as x,t as g,c as L,m as R,p as z}from"./entry.374da493.js";import{f as b,h as M,g as N,c as U}from"./getDaysData.e2b963c8.js";const q={class:"content container"},G={class:"content__add add"},H={class:"add__label",for:"add"},K={key:0},P={key:1},Q={class:"content__top"},X={class:"data-navbar"},Y={class:"data-navbar__list"},Z=["onClick"],V={class:"data-navbar__date"},ee={class:"data-navbar__weekday"},te={class:"table"},ae={class:"table__row table__row--main table__row--border"},se=s("div",{class:"table__name"},null,-1),le={class:"table__hours"},ne={class:"table__name"},oe={class:"table__hours table__hours--border"},de={__name:"index",setup(re){function k(e){return e.match(/.{1,2}/g)||[]}I();const w=p(null),D=p([]),m=p(null),C=p(!1),l=J(),W=v(()=>l.getEmployes),o=v({get(){return l.getWeek||0},set(e){l.curWeek=e}}),c=v({get(){return l.getDay||0},set(e){l.curDay=e}}),i=v({get(){return l.getMonth||N()},set(e){l.curMonth=e}}),E=v({get(){return l.getFirst||b(i.value[o.value][0],!0)},set(e){l.curFirst=e}}),B=v(()=>{let e=[],a=7-e.length;if(a>0)for(let r=0;r<a;r++){let t=U(E.value,7-a+r,!0);e.push({date:t,active:"",start:""})}return e});O([W,c,o],()=>{let e=JSON.parse(JSON.stringify(W.value.employes)),a="000102030405060708091011121314151617181920212223",r="";w.value=e?e.map(t=>{let n=t.data.find(F=>F.date===b(i.value[o.value][c.value],!0));return t.data=n?n.active:"",r+=t.data,t}):[],r=new Set(k(r)),D.value=k(a).filter(t=>!r.has(t)),console.log("\u0414\u0430\u043D\u043D\u044B\u0435 \u043F\u043E \u0442\u0435\u043A\u0443\u0449\u0435\u043C\u0443 \u0434\u043D\u044E",w.value),console.log("\u0421\u0442\u0440\u043E\u043A\u0430 \u043D\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0445 \u0447\u0430\u0441\u043E\u0432",D.value)},{deep:!0});const $=e=>D.value.includes(M(e-1)),S=e=>{if(e<0||e>6){let a=e<0?o.value-1:o.value+1;a<0||a>3?(i.value=N(a),o.value=a<0?3:0):o.value=a,c.value=0,E.value=b(i.value[o.value][0],!0);return}c.value=e,E.value=b(i.value[o.value][0],!0)},A=()=>{m.value&&(l.data.employes.push({id:l.data.newEmployId,name:m.value,data:[]}),l.data.newEmployId+=1,localStorage.setItem("employes",JSON.stringify(l.data)),m.value=null,C.value=!0,setTimeout(()=>{C.value=!1},2e3))};return l.getLocal(),(e,a)=>{const r=z;return _(),d("main",q,[s("div",G,[s("label",H,[T(s("input",{class:"add__input",type:"text",name:"add",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0424\u0418\u041E \u0440\u0430\u0431\u043E\u0442\u043D\u0438\u043A\u0430","onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t)},null,512),[[j,m.value]])]),s("button",{class:"add__btn",onClick:a[1]||(a[1]=h(t=>A(),["prevent"]))},[C.value?(_(),d("span",K," \u0421\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D ")):(_(),d("span",P," \u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u043D\u043E\u0432\u043E\u0433\u043E \u0441\u043E\u0442\u0440\u0443\u0434\u043D\u0438\u043A\u0430 "))])]),s("div",Q,[s("div",X,[s("button",{class:"data-navbar__btn data-navbar__btn--prev",onClick:a[2]||(a[2]=h(t=>S(u(c)-7),["prevent"]))}),s("ul",Y,[(_(!0),d(y,null,f(u(B),(t,n)=>(_(),d("li",{class:"data-navbar__item",key:n},[s("button",{class:x(["data-navbar__item-btn",{"data-navbar__item-btn--chosen":u(c)===n}]),onClick:h(F=>S(n),["prevent"])},[s("div",V,g(u(b)(u(i)[u(o)][n])),1),s("div",ee,g(u(l).weekDays[n].title),1)],10,Z)]))),128))]),s("button",{class:"data-navbar__btn data-navbar__btn--next",onClick:a[3]||(a[3]=h(t=>S(u(c)+7),["prevent"]))})])]),s("section",te,[s("div",ae,[se,s("div",le,[(_(),d(y,null,f(24,t=>s("div",{class:x(["table__hour",{"table__hour--empty":$(t)}]),key:t},g(u(M)(t-1)),3)),64))])]),(_(!0),d(y,null,f(w.value,t=>(_(),L(r,{class:"table__row table__row--main table__row--border table__row--hover",key:t.id,to:"/Doctor-s-calendar-vue3-nuxt/user/"+t.id},{default:R(()=>[s("div",ne,g(t.name),1),s("div",oe,[(_(),d(y,null,f(24,n=>s("div",{class:x(["table__hour table__hour--main",{"table__hour--fill":k(t.data).includes(u(M)(n-1))}]),key:n},null,2)),64))])]),_:2},1032,["to"]))),128))])])}}};export{de as default};
